<!DOCTYPE html>
<html>
<head>
    <title>D3</title>
    <link rel="stylesheet" href="index.css" type="text/css" />
    <script src = "http://d3js.org/d3.v4.min.js"></script>
    <script type = "text/javascript" src = "Field.js"></script>
    <script type = "text/javascript" src = "player.js"></script>
</head>
<body background = "./back.jpg">
    <div id = "time_line"></div>
    <div id = "player_pos"></div>
    <div id = "player_info"></div>
    <div id = "player_value"></div>
    <div id = "game_title"></div>
    <div id = "field"></div>
    <div id = "setting"></div>
    <script>
        d3.queue().defer(d3.json, "./data/dumpData_t1_m483676_agg0.json").await(main);

        function main(error, data) {
            if (error) throw error;
            console.log(data);

            var width, height;

            width = document.getElementById("field").getBoundingClientRect().width;
            height = document.getElementById("field").getBoundingClientRect().height;
            var svg_field = d3.select("#field").append("svg");
            svg_field.attr("width", width).attr("height", height);
            var f1 = new Field(svg_field, 0, 0, width, height, 0);

            width = document.getElementById("player_pos").getBoundingClientRect().width;
            height = document.getElementById("player_pos").getBoundingClientRect().height;
            var svg_player_pos = d3.select("#player_pos").append("svg");
            svg_player_pos.attr("width", width).attr("height", height);
            var f2 = new Field(svg_player_pos, 0, 0, width, height, 1);

            var p = new Array();
            for (var i = 1; i < 10; i++)
                p[i] = new Player(f2, i*10, i*10, i, i);
        }
    </script>
</body>
</html>    